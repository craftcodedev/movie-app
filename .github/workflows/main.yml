name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    
    env:
      APP_NAME: movil-app
      ENVIRONMENT: dev
      RELEASE_VERSION: ${ env.GITHUB_SHA }
      PDD: ${{ env.APP_NAME }}
    
    steps:
      - name: Set registry env
        run: echo ::set-env name=REGISTRY::eu.gcr.io/craft-code-255613/$APP_NAME-$ENVIRONMENT
      - name: Set image env
        run: echo ::set-env name=IMAGE::$REGISTRY:$RELEASE_VERSION
      - name: define variables
        run: echo define variables $PDD $PDD $IMAGE
      #- name: Checkout
      #  uses: actions/checkout@v2
      #- name: build
      #  run: docker build . --file etc/docker/Dockerfile --tag $IMAGE
      #- name: tests
      #  run: docker run -w /var/app/ -i $IMAGE node_modules/mocha/bin/mocha

      #a√±ado el uso de artefactos: todo el codigo compilado lo publico en algun sitio donde un job(deploy) siguiente pueda recogerlo y desplegarlo
      #- name: publish de code
      #- name: 